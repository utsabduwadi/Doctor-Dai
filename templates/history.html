{% extends "base.html" %}
{% block title %}Health History{% endblock %}
{% block content %}


<div class="history-wrap">
    <section class="history-title">
        <h1>Health History</h1>
        <p>Track your health metrics over time. Input your latest measurements and visualize trends to monitor your progress.</p>
    </section>

    <div class="history-grid">
        <section class="history-card entry-panel">
            <h2>Add New Entry</h2>
            <form action="/history" method="POST">
    <div class="fields-grid">
        <div class="field">
            <label for="height">Height (cm)</label>
            <input id="height" name="height" type="number" placeholder="170">
        </div>

        <div class="field">
            <label for="weight">Weight (kg)</label>
            <input id="weight" name="weight" type="number" placeholder="70">
        </div>

        <div class="field">
            <label for="age">Age</label>
            <input id="age" name="age" type="number" placeholder="30">
        </div>

        <div class="field">
            <label for="gender">Gender</label>
            <select id="gender" name="gender">
                <option selected>Select</option>
                <option>Female</option>
                <option>Male</option>
                <option>Other</option>
            </select>
        </div>

        <div class="field full">
            <label>Blood Pressure</label>
            <div class="mini-grid">
                <div class="field">
                    <label for="systolic">Systolic (mmHg)</label>
                    <input id="systolic" name="systolic" type="number" placeholder="120">
                </div>
                <div class="field">
                    <label for="diastolic">Diastolic (mmHg)</label>
                    <input id="diastolic" name="diastolic" type="number" placeholder="80">
                </div>
            </div>
        </div>

        <div class="field full">
            <label for="heart_rate">Heart Rate (bpm)</label>
            <input id="heart_rate" name="heart_rate" type="number" placeholder="72">
        </div>

        <div class="field full">
            <label for="blood_sugar">Blood Sugar (mg/dL)</label>
            <input id="blood_sugar" name="blood_sugar" type="number" placeholder="100">
        </div>
    </div>

    <button type="submit" class="save-btn">+ Save Entry</button>
</form>

        </section>

        <section class="history-card trend-panel">
            <div class="trend-top">
                <h2>Health Trends</h2>
                <div class="metric-tabs">
                    <span class="metric-tab active">Blood Pressure</span>
                    <span class="metric-tab">Weight</span>
                    <span class="metric-tab">Heart Rate</span>
                    <span class="metric-tab">Blood Sugar</span>
                </div>
            </div>

            <p class="showing">Showing data for: <span>Blood Pressure</span></p>

            <div class="chart-box">
                <div class="chart-legend">
                    <span><i class="dot a"></i>Systolic</span>
                    <span><i class="dot b"></i>Diastolic</span>
                </div>
                <svg class="chart-svg" viewBox="0 0 760 230" preserveAspectRatio="none" aria-label="Blood pressure trend chart">
                    <line x1="44" y1="20" x2="44" y2="184" stroke="#cfe0ea" />
                    <line x1="44" y1="184" x2="728" y2="184" stroke="#cfe0ea" />
                    <line x1="44" y1="145" x2="728" y2="145" stroke="#e7eff4" />
                    <line x1="44" y1="106" x2="728" y2="106" stroke="#e7eff4" />
                    <line x1="44" y1="67" x2="728" y2="67" stroke="#e7eff4" />
                    <line x1="44" y1="28" x2="728" y2="28" stroke="#e7eff4" />

                    <polyline fill="none" stroke="#1ab3df" stroke-width="3"
                        points="60,83 142,86 224,80 306,75 388,84 470,81 552,87 634,83 716,79" />
                    <polyline fill="none" stroke="#91b7cb" stroke-width="3"
                        points="60,133 142,134 224,128 306,124 388,132 470,130 552,135 634,133 716,130" />

                    <text x="52" y="202" font-size="12" fill="#67808f">Jan</text>
                    <text x="134" y="202" font-size="12" fill="#67808f">Feb</text>
                    <text x="216" y="202" font-size="12" fill="#67808f">Mar</text>
                    <text x="298" y="202" font-size="12" fill="#67808f">Apr</text>
                    <text x="380" y="202" font-size="12" fill="#67808f">May</text>
                    <text x="462" y="202" font-size="12" fill="#67808f">Jun</text>
                    <text x="544" y="202" font-size="12" fill="#67808f">Jul</text>
                    <text x="626" y="202" font-size="12" fill="#67808f">Aug</text>

                    <text x="9" y="188" font-size="12" fill="#67808f">0</text>
                    <text x="2" y="149" font-size="12" fill="#67808f">35</text>
                    <text x="2" y="110" font-size="12" fill="#67808f">70</text>
                    <text x="0" y="71" font-size="12" fill="#67808f">105</text>
                    <text x="0" y="32" font-size="12" fill="#67808f">140</text>
                </svg>
            </div>

            <div class="recent">
    <h3>Recent Entries</h3>

    {% for row in entries %}
    <div class="entry-row">
        <div class="entry-date">

            {{ row['id'] }} <!-- You can replace with actual date when you add it -->

        </div>

        <div class="entry-data">
            <span>BP <strong>{{ row['Systolic'] }}/{{ row['Diastolic'] }}</strong></span>
            <span>Weight <strong>{{ row['weight'] }} kg</strong></span>
            <span>Heart Rate <strong>{{ row['Heart_rate'] }} bpm</strong></span>
            <span>Blood Sugar <strong>{{ row['blood_sugar'] }} mg/dL</strong></span>
        </div>

        <span class="entry-more">...</span>
    </div>
    {% endfor %}

    {% if entries|length == 0 %}
    <p>No entries found.</p>
    {% endif %}
</div>

        </section>
    </div>
</div>
{% endblock content %}
